{"remainingRequest":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/src/views/Reports.vue?vue&type=style&index=0&id=ff4e9e16&scoped=true&lang=css&","dependencies":[{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/src/views/Reports.vue","mtime":1680088796555},{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouc2Nyb2xsLWFyZWEgew0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIG1hcmdpbjogYXV0bzsNCiAgd2lkdGg6IDQwMHB4Ow0KICBoZWlnaHQ6IDQwdmg7DQogIG1heC1oZWlnaHQ6IDQwdmg7DQp9DQo="},{"version":3,"sources":["Reports.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0YA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Reports.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <b-spinner\r\n      v-if=\"!loaded\"\r\n      style=\"width: 3rem; height: 3rem;\"\r\n      variant=\"primary\"\r\n      label=\"Loading...\" type=\"grow\"\r\n      class=\"text-center\"\r\n    />\r\n    <b-row v-if=\"loaded\">\r\n      <b-col lg=\"4\">\r\n        <b-card no-body>\r\n          <b-card-header class=\"mt-n1\">\r\n            <h4 style=\"color: #4D6D8A; margin-top: 0.5em\">\r\n              Total Installed Systems\r\n            </h4>\r\n          </b-card-header>\r\n          <div style=\"display: flex; justify-content: center; align-items: center; padding: 20px 0 62px 0\">\r\n            <b-card-text>\r\n              <h1 class=\"display-3\">\r\n                {{ installed }}\r\n              </h1>\r\n              <h4 class=\"text-center\">\r\n                Units\r\n              </h4>\r\n            </b-card-text>\r\n          </div>\r\n          <div>\r\n            <p\r\n              class=\"float-right\"\r\n              style=\"padding-right: 21px\"\r\n            >\r\n              <feather-icon\r\n                icon=\"TrendingUpIcon\"\r\n                size=\"20\"\r\n                class=\"text-success\"\r\n                style=\"margin-right: 0.5em; margin-top: -0.6em\"\r\n              />\r\n              <span class=\"font-large-1 font-weight-bolder\">3</span>\r\n              <small>%</small>\r\n            </p>\r\n          </div>\r\n        </b-card>\r\n      </b-col>\r\n      <b-col lg=\"8\">\r\n        <b-card no-body>\r\n          <b-card-header class=\"mt-n1\">\r\n            <h4 style=\"color: #4D6D8A; margin-top: 0.5em\">\r\n              Installation By Location\r\n            </h4>\r\n            <b-dropdown\r\n              right\r\n              :text=\"currentState\"\r\n              size=\"sm\"\r\n              class=\"budget-dropdown\"\r\n              variant=\"outline-secondary\"\r\n            >\r\n              <vue-perfect-scrollbar\r\n                :settings=\"perfectScrollbarSettings\"\r\n                class=\"scroll-area\"\r\n              >\r\n                <b-dropdown-item\r\n                  v-for=\"state in states\"\r\n                  :key=\"state.stateid\"\r\n                  @click=\"changeState(state)\"\r\n                >\r\n                  {{ state.sname }}\r\n                </b-dropdown-item>\r\n              </vue-perfect-scrollbar>\r\n            </b-dropdown>\r\n          </b-card-header>\r\n          <b-row>\r\n            <b-col lg=\"6\">\r\n              <b-spinner\r\n                v-if=\"loadingChart\"\r\n                style=\"width: 3rem; height: 3rem;\"\r\n                variant=\"primary\"\r\n                label=\"Loading...\" type=\"grow\"\r\n                class=\"mb-2 ml-5\"\r\n              />\r\n              <vue-apex-charts\r\n                v-if=\"!loadingChart && !nodata\"\r\n                type=\"pie\"\r\n                height=\"300\"\r\n                class=\"mt-0 mb-2\"\r\n                :options=\"locationPie.chartOptions\"\r\n                :series=\"locationPie.series\"\r\n              />\r\n              <b-card-text\r\n                v-if=\"!loadingChart && nodata\"\r\n                class=\"ml-lg-5 mb-2 px-lg-0 px-2\"\r\n              >\r\n                Sorry, there's currently no sales data available for {{ currentState }}\r\n              </b-card-text>\r\n            </b-col>\r\n            <b-col\r\n              lg=\"6\"\r\n              class=\"pl-lg-0 pl-3 pb-lg-0 pb-2\"\r\n            >\r\n              <b-row>\r\n                <b-col cols=\"6\">\r\n                  <!--                  <div class=\"series-info\">-->\r\n                  <!--                    <feather-icon-->\r\n                  <!--                      icon=\"CircleIcon\"-->\r\n                  <!--                      size=\"16\"-->\r\n                  <!--                      class=\"mr-50\"-->\r\n                  <!--                      style=\"color: #4D6D8A; margin-top: -0.3em\"-->\r\n                  <!--                    />-->\r\n                  <!--                    <span class=\"font-weight-bolder\">Wuse 2</span>-->\r\n                  <!--                  </div>-->\r\n                </b-col>\r\n              </b-row>\r\n            </b-col>\r\n          </b-row>\r\n        </b-card>\r\n      </b-col>\r\n    </b-row>\r\n    <b-row v-if=\"loaded\">\r\n      <b-col lg=\"9\">\r\n        <b-card no-body>\r\n          <b-card-header class=\"mt-n1\">\r\n            <h4 style=\"color: #4D6D8A; margin-top: 0.5em\">\r\n              Sales Overview\r\n            </h4>\r\n            <b-dropdown\r\n              right\r\n              :text=\"currentLine\"\r\n              size=\"sm\"\r\n              class=\"budget-dropdown\"\r\n              variant=\"outline-secondary\"\r\n            >\r\n              <b-dropdown-item\r\n                @click=\"changeLine('Weekly')\"\r\n              >\r\n                Weekly\r\n              </b-dropdown-item>\r\n              <b-dropdown-item\r\n                @click=\"changeLine('Monthly')\"\r\n              >\r\n                Monthly\r\n              </b-dropdown-item>\r\n              <b-dropdown-item\r\n                @click=\"changeLine('Yearly')\"\r\n              >\r\n                Yearly\r\n              </b-dropdown-item>\r\n            </b-dropdown>\r\n          </b-card-header>\r\n          <b-row>\r\n            <b-col lg=\"12\">\r\n              <b-spinner\r\n                v-if=\"loadingLine\"\r\n                style=\"width: 3rem; height: 3rem;\"\r\n                variant=\"dark\"\r\n                label=\"Loading...\" type=\"grow\"\r\n                class=\"mb-2 ml-5\"\r\n              />\r\n              <vue-apex-charts\r\n                v-if=\"!loadingLine\"\r\n                type=\"line\"\r\n                height=\"300\"\r\n                :options=\"salesChart.chartOptions\"\r\n                :series=\"salesChart.series\"\r\n              />\r\n            </b-col>\r\n          </b-row>\r\n        </b-card>\r\n      </b-col>\r\n      <b-col lg=\"3\">\r\n        <b-card no-body>\r\n          <b-card-header class=\"mt-n1\">\r\n            <h4 style=\"color: #4D6D8A; margin-top: 0.5em\">\r\n              Top Selling Products\r\n            </h4>\r\n          </b-card-header>\r\n          <b-card-body>\r\n            <b-table\r\n              stacked\r\n              :items=\"products\"\r\n            />\r\n          </b-card-body>\r\n        </b-card>\r\n      </b-col>\r\n    </b-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VueApexCharts from 'vue-apexcharts'\r\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\r\n\r\nexport default {\r\n  components: {\r\n    VuePerfectScrollbar,\r\n    VueApexCharts,\r\n  },\r\n  data() {\r\n    return {\r\n      loadingChart: false,\r\n      loadingLine: false,\r\n      loaded: false,\r\n      nodata: false,\r\n      perfectScrollbarSettings: {\r\n        maxScrollbarLength: 60,\r\n      },\r\n      currentState: 'Federal Capital Territory',\r\n      currentLine: 'Monthly',\r\n      installed: 0,\r\n      locationPie: {\r\n        series: [],\r\n        chartOptions: {\r\n          chart: {\r\n            toolbar: {\r\n              show: false,\r\n            },\r\n          },\r\n          labels: [],\r\n          dataLabels: {\r\n            enabled: false,\r\n          },\r\n          legend: { show: true },\r\n          stroke: {\r\n            width: 1,\r\n          },\r\n          colors: ['#4D6D8A', '#E06294', '#7F3F98', '#BD5B08', '#8AEBF1', '#FF0404', '#FFD102', '#000000', '#EEB7E9', '#0D6A70'],\r\n        },\r\n      },\r\n      salesChart: {\r\n        series: [\r\n          {\r\n            data: [],\r\n          },\r\n        ],\r\n        chartOptions: {\r\n          chart: {\r\n            zoom: {\r\n              enabled: false,\r\n            },\r\n            toolbar: {\r\n              show: false,\r\n            },\r\n          },\r\n          markers: {\r\n            strokeWidth: 3,\r\n            strokeOpacity: 1,\r\n            strokeColors: ['#c4c4c4'],\r\n            colors: ['#2C3E50'],\r\n          },\r\n          colors: ['#2C3E50'],\r\n          dataLabels: {\r\n            enabled: false,\r\n          },\r\n          stroke: {\r\n            curve: 'straight',\r\n          },\r\n          grid: {\r\n            xaxis: {\r\n              lines: {\r\n                show: true,\r\n              },\r\n            },\r\n          },\r\n          tooltip: {\r\n            // custom(data) {\r\n            //   return `${'<div class=\"px-1 py-50\"><span>'}${\r\n            //     data.series[data.seriesIndex][data.dataPointIndex]\r\n            //   }%</span></div>`\r\n            // },\r\n          },\r\n          xaxis: {\r\n            categories: [],\r\n          },\r\n          yaxis: {\r\n            // opposite: isRtl,\r\n          },\r\n        },\r\n      },\r\n      products: [\r\n        {},\r\n      ],\r\n      states: [],\r\n    }\r\n  },\r\n  created() {\r\n    this.getReports()\r\n    this.getStates()\r\n  },\r\n  mounted() {\r\n    document.getElementById('custom-breadcrumb').innerHTML = 'Reports'\r\n  },\r\n  methods: {\r\n    getReports() {\r\n      this.$store.dispatch('report/getReports').then(res => {\r\n        const { data } = res.data\r\n        this.installed = data.total_intalled_systems\r\n        const pieChart = data.pie_chat_data\r\n        const lineGraph = data.line_graph_data\r\n        const topSelling = data.top_selling\r\n        if (pieChart.length < 1) {\r\n          this.nodata = true\r\n          this.locationPie.chartOptions.legend.show = false\r\n        } else {\r\n          this.nodata = false\r\n          this.locationPie.chartOptions.legend.show = true\r\n          pieChart.forEach(pie => {\r\n            this.locationPie.series.push(pie.Series)\r\n            this.locationPie.chartOptions.labels.push(pie.Label)\r\n          })\r\n        }\r\n        lineGraph.forEach(line => {\r\n          this.salesChart.series[0].data.push(line.Series)\r\n          this.salesChart.chartOptions.xaxis.categories.push(line.Label)\r\n        })\r\n        topSelling.forEach(product => {\r\n          const productName = product.productname\r\n          this.products[0] = { ...this.products[0], [productName]: `${product.salesCount} units` }\r\n        })\r\n        this.loaded = true\r\n      })\r\n    },\r\n    getStates() {\r\n      this.$store.dispatch('client/getStates').then(res => {\r\n        const { data } = res.data\r\n        this.states = data\r\n      })\r\n    },\r\n    changeState(state) {\r\n      this.loadingChart = true\r\n      this.currentState = state.sname\r\n      const stateID = state.stateid\r\n      this.$store.dispatch('report/getSalesByStateID', { stateID }).then(res => {\r\n        const { data } = res.data\r\n        this.locationPie.series = []\r\n        this.locationPie.chartOptions.labels = []\r\n        if (data.length < 1) {\r\n          this.nodata = true\r\n          this.locationPie.chartOptions.legend.show = false\r\n        } else {\r\n          this.nodata = false\r\n          this.locationPie.chartOptions.legend.show = true\r\n          data.forEach(pie => {\r\n            this.locationPie.series.push(pie.Series)\r\n            this.locationPie.chartOptions.labels.push(pie.Label)\r\n          })\r\n        }\r\n        this.loadingChart = false\r\n      })\r\n    },\r\n    changeLine(newLine) {\r\n      this.currentLine = newLine\r\n      this.loadingLine = true\r\n      switch (newLine) {\r\n        case 'Weekly':\r\n          this.$store.dispatch('report/getWeeklyLine').then(res => {\r\n            const { data } = res.data\r\n            this.salesChart.series[0].data = []\r\n            this.salesChart.chartOptions.xaxis.categories = []\r\n            data.forEach(line => {\r\n              this.salesChart.series[0].data.push(line.Series)\r\n              this.salesChart.chartOptions.xaxis.categories.push(line.Label)\r\n            })\r\n            this.loadingLine = false\r\n          })\r\n          break\r\n        case 'Yearly':\r\n          this.$store.dispatch('report/getYearlyLine').then(res => {\r\n            const { data } = res.data\r\n            this.salesChart.series[0].data = []\r\n            this.salesChart.chartOptions.xaxis.categories = []\r\n            data.forEach(line => {\r\n              this.salesChart.series[0].data.push(line.Series)\r\n              this.salesChart.chartOptions.xaxis.categories.push(line.Label)\r\n            })\r\n            this.loadingLine = false\r\n          })\r\n          break\r\n        default:\r\n          this.$store.dispatch('report/getMonthlyLine').then(res => {\r\n            const { data } = res.data\r\n            this.salesChart.series[0].data = []\r\n            this.salesChart.chartOptions.xaxis.categories = []\r\n            data.forEach(line => {\r\n              this.salesChart.series[0].data.push(line.Series)\r\n              this.salesChart.chartOptions.xaxis.categories.push(line.Label)\r\n            })\r\n            this.loadingLine = false\r\n          })\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.scroll-area {\r\n  position: relative;\r\n  margin: auto;\r\n  width: 400px;\r\n  height: 40vh;\r\n  max-height: 40vh;\r\n}\r\n</style>\r\n"]}]}