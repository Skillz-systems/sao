{"remainingRequest":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/src/views/projects/InvoicingAndPayments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/src/views/projects/InvoicingAndPayments.vue","mtime":1669925487880},{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kingsonly/Documents/tentacular/all_in_one/sao/sao-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBWYWxpZGF0aW9uUHJvdmlkZXIsIFZhbGlkYXRpb25PYnNlcnZlciB9IGZyb20gInZlZS12YWxpZGF0ZSI7DQppbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gIkB2YWxpZGF0aW9ucyI7DQppbXBvcnQgdlNlbGVjdCBmcm9tICJ2dWUtc2VsZWN0IjsNCmltcG9ydCBWdWVHb29nbGVBdXRvY29tcGxldGUgZnJvbSAidnVlLWdvb2dsZS1hdXRvY29tcGxldGUiOw0KaW1wb3J0IFZ1ZU51bWVyaWNJbnB1dCBmcm9tICJ2dWUtbnVtZXJpYy1pbnB1dCI7DQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsNCiAgICBWYWxpZGF0aW9uUHJvdmlkZXIsDQogICAgVmFsaWRhdGlvbk9ic2VydmVyLA0KICAgIHZTZWxlY3QsDQogICAgVnVlR29vZ2xlQXV0b2NvbXBsZXRlLA0KICAgIFZ1ZU51bWVyaWNJbnB1dCwNCiAgfSwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtaXNjZU1lc3NhZ2U6IG51bGwsDQogICAgICBzaG93QWRkQW5vdGhlckxvY2F0aW9uQnRuOiBmYWxzZSwNCiAgICAgIHNob3dMb2NhdGlvbklucHV0RmllbGRzOiB0cnVlLA0KICAgICAgaWQ6IDAsDQogICAgICBpbnN0YWxsYXRpb25Mb2NhdGlvbnNPYmplY3Q6IG5ldyBNYXAoKSwNCiAgICAgIGluc3RhbGxhdGlvbkFkZHJlc3M6ICIiLA0KICAgICAgaW5zdGFsbGF0aW9uTG9jYXRpb25zOiBbXSwNCiAgICAgIG1lc3NhZ2U6ICIiLA0KICAgICAgc2VsZWN0ZWQ6ICJmYWxzZSIsDQogICAgICBsb2NhdGlvbkNvdW50QWJvdmVPbmU6IGZhbHNlLA0KICAgICAgaXNBZGRpbmdMb2NhdGlvbjogZmFsc2UsDQogICAgICBpc0xvYWRpbmc6IGZhbHNlLA0KICAgICAgY2xpZW50OiBudWxsLA0KICAgICAgcHJvZHVjdDogbnVsbCwNCiAgICAgIHByb2plY3ROYW1lOiBudWxsLA0KICAgICAgZnVsbEFkZHJlc3M6IG51bGwsDQogICAgICBwcm9qZWN0VHlwZTogbnVsbCwNCiAgICAgIHN5c3RlbU1vZGVsOiBudWxsLA0KICAgICAgc3lzdGVtU2l6ZTogMCwNCiAgICAgIGluc3RhbGxhdGlvblR5cGU6IG51bGwsDQogICAgICBzZWxlY3Rpb25Nb2RlOiBudWxsLA0KICAgICAgY2F0ZWdvcnk6IG51bGwsDQogICAgICBzdWJDYXRlZ29yeTogbnVsbCwNCiAgICAgIHByaWNlOiBudWxsLA0KICAgICAgbnVtQmF0dGVyaWVzOiAxLA0KICAgICAgbnVtUGFuZWxzOiAxLA0KICAgICAgc3RhdHVzOiBudWxsLA0KICAgICAgbG9jYXRpb246IG51bGwsDQogICAgICBzdGF0ZTogbnVsbCwNCiAgICAgIGxnYTogbnVsbCwNCiAgICAgIHByb2R1Y3REaXNjb3VudDogbnVsbCwNCiAgICAgIGRlc2NyaXB0aW9uOiBudWxsLA0KICAgICAgc2hvd1NpbmdsZVNlbGVjdGlvbkNvbnQ6IGZhbHNlLA0KICAgICAgc2hvd1Byb2R1Y3RTYWxlc0NvbnQ6IGZhbHNlLA0KICAgICAgYWNjZXNzb3J5VHlwZTogW10sDQogICAgICBhY2Nlc3Nvcnk6IG51bGwsDQogICAgICBjYXRlZ29yaWVzOiBbXSwNCiAgICAgIHN1YkNhdGVnb3JpZXM6IFtdLA0KICAgICAgYWxsTWlzY2VsbGFuZW91czogW10sDQogICAgICBjcmVhdGVkTWlzY2VsbGFuZW91czogW10sDQogICAgICBtaXNjZWxsYW5lb3VzOiBudWxsLA0KICAgICAgbWlzY2VsbGFub3VzQW1vdW50OiBudWxsLA0KICAgICAgY2xpZW50czogW3sgdmFsdWU6IG51bGwsIHRpdGxlOiAic2VsZWN0IGEgY2xpZW50IiB9XSwNCiAgICAgIHByb2R1Y3RzOiBbeyB2YWx1ZTogbnVsbCwgdGl0bGU6ICJzZWxlY3QgYSBwcm9kdWN0IiwgaWQ6IG51bGwgfV0sDQogICAgICBwcm9qZWN0VHlwZXM6IFt7IHZhbHVlOiBudWxsLCB0aXRsZTogInNlbGVjdCBhIHByb2plY3QgdHlwZSIgfV0sDQogICAgICBzeXN0ZW1Nb2RlbHM6IFsNCiAgICAgICAgeyB2YWx1ZTogbnVsbCwgdGV4dDogIlBsZWFzZSBzZWxlY3QgYSBzb2xhciBzeXN0ZW0gbW9kZWwiIH0sDQogICAgICAgIHsgdmFsdWU6IDEsIHRleHQ6ICJCRVMtMSIgfSwNCiAgICAgICAgeyB2YWx1ZTogMiwgdGV4dDogIkJFUy0zIiB9LA0KICAgICAgICB7IHZhbHVlOiAzLCB0ZXh0OiAiQkVTLTUiIH0sDQogICAgICAgIHsgdmFsdWU6IDQsIHRleHQ6ICJCRVMtOCIgfSwNCiAgICAgIF0sDQogICAgICBzeXN0ZW1TaXplczogWw0KICAgICAgICB7IHZhbHVlOiBudWxsLCB0ZXh0OiAiUGxlYXNlIHNlbGVjdCBhIHNvbGFyIHN5c3RlbSBzaXplIiB9LA0KICAgICAgICB7IHZhbHVlOiAiMSAtIDIga1ciLCB0ZXh0OiAiMSAtIDIga1ciIH0sDQogICAgICAgIHsgdmFsdWU6ICIzLjAga1ciLCB0ZXh0OiAiMy4wIGtXIiB9LA0KICAgICAgICB7IHZhbHVlOiAiNC4wIGtXIiwgdGV4dDogIjQuMCBrVyIgfSwNCiAgICAgICAgeyB2YWx1ZTogIjUuMCBrVyIsIHRleHQ6ICI1LjAga1ciIH0sDQogICAgICAgIHsgdmFsdWU6ICI1IC0gMTAga1ciLCB0ZXh0OiAiNSAtIDEwIGtXIiB9LA0KICAgICAgICB7IHZhbHVlOiAiMTAgKyBrVyIsIHRleHQ6ICIxMCArIGtXIiB9LA0KICAgICAgXSwNCiAgICAgIHNlbGVjdGlvbk1vZGVzOiBbDQogICAgICAgIHsgdmFsdWU6IG51bGwsIHRpdGxlOiAic2VsZWN0IHByb2R1Y3QgbW9kZSIgfSwNCiAgICAgICAgeyB2YWx1ZTogIlByb2R1Y3RTYWxlcyIsIHRpdGxlOiAiUHJvZHVjdCBTYWxlcyIgfSwNCiAgICAgICAgeyB2YWx1ZTogIlNpbmdsZVN0b2NrU2FsZXMiLCB0aXRsZTogIlNpbmdsZSBTdG9jayBTYWxlcyIgfSwNCiAgICAgIF0sDQogICAgICBpbnN0YWxsYXRpb25UeXBlczogWw0KICAgICAgICB7IHZhbHVlOiBudWxsLCB0aXRsZTogInNlbGVjdCBhbiBpbnN0YWxsYXRpb24gdHlwZSIgfSwNCiAgICAgICAgeyB2YWx1ZTogIlJvb2Z0b3AiLCB0aXRsZTogIlJvb2Z0b3AiIH0sDQogICAgICAgIHsgdmFsdWU6ICJHcm91bmRtb3VudCIsIHRpdGxlOiAiR3JvdW5kbW91bnQiIH0sDQogICAgICBdLA0KICAgICAgc3RhdHVzT3B0aW9uczogW3sgdmFsdWU6IG51bGwsIHRpdGxlOiAic2VsZWN0IGEgcHJvamVjdCBzdGF0dXMiIH1dLA0KICAgICAgbG9jYXRpb25zOiBbeyB2YWx1ZTogbnVsbCwgdGV4dDogIlBsZWFzZSBzZWxlY3QgYSBsb2NhdGlvbiIgfV0sDQogICAgICBzdGF0ZXM6IFt7IHZhbHVlOiBudWxsLCB0aXRsZTogIlBsZWFzZSBzZWxlY3QgYSBzdGF0ZSIgfV0sDQogICAgICBhZGRyZXNzOiBbeyB2YWx1ZTogbnVsbCwgdGV4dDogIlBsZWFzZSBzZWxlY3QgYW4gYWRkcmVzcyIgfV0sDQogICAgICBsZ2FzOiBbeyB2YWx1ZTogbnVsbCwgdGl0bGU6ICJQbGVhc2Ugc2VsZWN0IGFuIGxnYSIgfV0sDQogICAgICBiYXR0ZXJ5VHlwZTogbnVsbCwNCiAgICAgIGJhdHRlcnlRdWFudGl0eTogMSwNCiAgICAgIGJhdHRlcnlUeXBlczogW3sgdmFsdWU6IG51bGwsIHRpdGxlOiAiUGxlYXNlIHNlbGVjdCBhIGJhdHRlcnkgdHlwZSIgfV0sDQogICAgICBpbnZlcnRlclR5cGU6IG51bGwsDQogICAgICBpbnZlcnRlclF1YW50aXR5OiAxLA0KICAgICAgaW52ZXJ0ZXJUeXBlczogW3sgdmFsdWU6IG51bGwsIHRpdGxlOiAiUGxlYXNlIHNlbGVjdCBhbiBpbnZlcnRlciB0eXBlIiB9XSwNCiAgICAgIHNvbGFyUGFuZWxUeXBlOiBudWxsLA0KICAgICAgc29sYXJQYW5lbFF1YW50aXR5OiAxLA0KICAgICAgc29sYXJQYW5lbFR5cGVzOiBbDQogICAgICAgIHsgdmFsdWU6IG51bGwsIHRpdGxlOiAiUGxlYXNlIHNlbGVjdCBhIHNvbGFyIHBhbmVsIHR5cGUiIH0sDQogICAgICBdLA0KICAgICAgbWlzY2VsbGFuZW91c0ZpZWxkOiBbDQogICAgICAgIHsga2V5OiAibWlzY2VsbGFuZW91c19pZCIsIGxhYmVsOiAiTmFtZSIgfSwNCiAgICAgICAgeyBrZXk6ICJhbW91bnQiLCBsYWJlbDogImFtb3VudCIgfSwNCiAgICAgICAgeyBrZXk6ICJ0aXRsZSIsIGxhYmVsOiAidGl0bGUiIH0sDQogICAgICBdLA0KDQogICAgICByZXF1aXJlZCwNCiAgICB9Ow0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgcHJpY2UobmV3VmFsdWUpIHsNCiAgICAgIGNvbnN0IHJlc3VsdCA9IG5ld1ZhbHVlDQogICAgICAgIC5yZXBsYWNlKC9cRC9nLCAiIikNCiAgICAgICAgLnJlcGxhY2UoL1xCKD89KFxkezN9KSsoPyFcZCkpL2csICIsIik7DQogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmV0dXJuLWFzc2lnbg0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gKHRoaXMucHJpY2UgPSByZXN1bHQpKTsNCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjdXN0b20tYnJlYWRjcnVtYiIpLmlubmVySFRNTCA9DQogICAgICAnUHJvamVjdHMgLyA8c3BhbiBzdHlsZT0iY29sb3I6ICNDNEM0QzQiPkFkZCBQcm9qZWN0PC9zcGFuPic7DQogICAgdGhpcy4kcmVmcy5hZGRyZXNzLmZvY3VzKCk7DQogICAgdGhpcy5nZXRTdWJJdGVtc01pcyg2KTsNCiAgICB0aGlzLmdldE1pc2NlbGxhbmVvdXMoKTsNCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgicHJvZHVjdHMiKTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldENsaWVudHMoKTsNCiAgICB0aGlzLmdldFByb2plY3RUeXBlcygpOw0KICAgIHRoaXMuZ2V0U3RhdHVzT3B0aW9ucygpOw0KICAgIHRoaXMuZ2V0UHJvZHVjdHMoKTsNCiAgICB0aGlzLmdldFN1Ykl0ZW1zKCk7DQogICAgdGhpcy5nZXRTdGF0ZXMoKTsNCiAgICB0aGlzLmdldEl0ZW1zKCk7DQogICAgdGhpcy5nZXRTdWJJdGVtc01pcyg2KTsNCiAgICB0aGlzLmdldE1pc2NlbGxhbmVvdXMoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGRlbGV0ZU1pc2NlbGxhbmVvdXMoaW5kZXgpIHsNCiAgICAgIHRoaXMuY3JlYXRlZE1pc2NlbGxhbmVvdXMuc3BsaWNlKGluZGV4LCAxKTsNCiAgICB9LA0KICAgIGFkZE1pc2NlbGxhbmVvdXMoKSB7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmFsbE1pc2NlbGxhbmVvdXMsICJkamRzanNqa3MiKTsNCg0KICAgICAgdGhpcy5taXNjZU1lc3NhZ2UgPSAiIjsNCiAgICAgIGlmICghdGhpcy5taXNjZWxsYW5lb3VzIHx8ICF0aGlzLm1pc2NlbGxhbm91c0Ftb3VudCkgew0KICAgICAgICB0aGlzLm1pc2NlTWVzc2FnZSA9ICJTZWxlY3QgT3B0aW9ucyI7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGNvbnN0IG1pc2NlbGxhbiA9IHRoaXMuYWxsTWlzY2VsbGFuZW91cy5maWx0ZXIoDQogICAgICAgIChlKSA9PiBlLnZhbHVlID09IHRoaXMubWlzY2VsbGFuZW91cw0KICAgICAgKTsNCiAgICAgIHRoaXMuY3JlYXRlZE1pc2NlbGxhbmVvdXMucHVzaCh7DQogICAgICAgIG1pc2NlbGxhbmVvdXNfaWQ6IHRoaXMubWlzY2VsbGFuZW91cywNCiAgICAgICAgYW1vdW50OiB0aGlzLm1pc2NlbGxhbm91c0Ftb3VudCwNCiAgICAgICAgdGl0bGU6IG1pc2NlbGxhblswXS50ZXh0LA0KICAgICAgfSk7DQogICAgfSwNCiAgICBtaXNjZWxsYW5lb3VzU2VsZWN0Q2hhbmdlKGUsIGtpKSB7DQogICAgICBjb25zb2xlLmxvZyhlLCBraSwgInNqc2Rqa2RqcyIpOw0KICAgIH0sDQogICAgZ2V0TWlzY2VsbGFuZW91cygpIHsNCiAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIik7DQogICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDsNCg0KICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgidGl0bGUiLCB0aGlzLm1pc2NlbGxhbmVvdXMpOw0KDQogICAgICBheGlvcw0KICAgICAgICAuZ2V0KGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9VUkx9L21pc2ApDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTsNCiAgICAgICAgICBkYXRhLm1hcCgoc3ViSXRlbSkgPT4gew0KICAgICAgICAgICAgY29uc3QgYWxsTWlzY2VsbGFuZW91cyA9IHsgdmFsdWU6IHN1Ykl0ZW0uaWQsIHRleHQ6IHN1Ykl0ZW0udGl0bGUgfTsNCiAgICAgICAgICAgIG91dHB1dC5wdXNoKGFsbE1pc2NlbGxhbmVvdXMpOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMuYWxsTWlzY2VsbGFuZW91cyA9IG91dHB1dDsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICBhbGVydChlcnIucmVzcG9uc2UuZGF0YT8ubWVzc2FnZSk7DQogICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyLnJlc3BvbnNlLmRhdGE/Lm1lc3NhZ2U7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICByZW1vdmVMb2NhdGlvbihpZCkgew0KICAgICAgdGhpcy5pbnN0YWxsYXRpb25Mb2NhdGlvbnNPYmplY3QgPSB0aGlzLmluc3RhbGxhdGlvbkxvY2F0aW9uc09iamVjdC5maWx0ZXIoDQogICAgICAgIChsb2NhdGlvbikgPT4gbG9jYXRpb24uaWQgIT09IGlkDQogICAgICApOw0KICAgIH0sDQogICAgZ2V0U3ViSXRlbXNNaXMoaXRlbSkgew0KICAgICAgY29uc3QgaXRlbUlEID0gaXRlbTsNCiAgICAgIHRoaXMuJHN0b3JlDQogICAgICAgIC5kaXNwYXRjaCgiaW52ZW50b3J5L2dldFN1Ykl0ZW1CeUlEIiwgeyBpdGVtSUQgfSkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcywgImpzamtzayIpOw0KICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzLmRhdGE7DQoNCiAgICAgICAgICBpZiAoaXRlbSA9PT0gMikgew0KICAgICAgICAgICAgZGF0YS5mb3JFYWNoKChzdWJJdGVtKSA9PiB7DQogICAgICAgICAgICAgIGNvbnN0IHN5c3RlbVNpemUgPSB7IHZhbHVlOiBzdWJJdGVtLmlkLCB0ZXh0OiBzdWJJdGVtLm5hbWUgfTsNCiAgICAgICAgICAgICAgdGhpcy5zeXN0ZW1TaXplcy5wdXNoKHN5c3RlbVNpemUpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSBlbHNlIGlmIChpdGVtID09PSAxKSB7DQogICAgICAgICAgICBkYXRhLmZvckVhY2goKHN1Ykl0ZW0pID0+IHsNCiAgICAgICAgICAgICAgY29uc3QgaW52ZXJ0ZXJUeXBlID0geyB2YWx1ZTogc3ViSXRlbS5pZCwgdGV4dDogc3ViSXRlbS5uYW1lIH07DQogICAgICAgICAgICAgIHRoaXMuaW52ZXJ0ZXJUeXBlcy5wdXNoKGludmVydGVyVHlwZSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0gPT09IDYpIHsNCiAgICAgICAgICAgIGRhdGEuZm9yRWFjaCgoc3ViSXRlbSkgPT4gew0KICAgICAgICAgICAgICBjb25zdCBhY2Nlc3NvcnlUeXBlID0geyB2YWx1ZTogc3ViSXRlbS5pZCwgdGV4dDogc3ViSXRlbS5uYW1lIH07DQogICAgICAgICAgICAgIHRoaXMuYWNjZXNzb3J5VHlwZS5wdXNoKGFjY2Vzc29yeVR5cGUpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGRhdGEuZm9yRWFjaCgoc3ViSXRlbSkgPT4gew0KICAgICAgICAgICAgICBjb25zdCBiYXR0ZXJ5VHlwZSA9IHsgdmFsdWU6IHN1Ykl0ZW0uaWQsIHRleHQ6IHN1Ykl0ZW0ubmFtZSB9Ow0KICAgICAgICAgICAgICB0aGlzLmJhdHRlcnlUeXBlcy5wdXNoKGJhdHRlcnlUeXBlKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRJdGVtcygpIHsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJpbnZlbnRvcnkvZ2V0SXRlbXMiKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlOw0KICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHJlcy5kYXRhOw0KICAgICAgICBjb25zb2xlLmxvZyhkYXRhLCAic2tzamtza2tqc2QiKTsNCiAgICAgICAgLy8gdGhpcy5jYXRlZ29yaWVzID0gZGF0YQ0KICAgICAgICBkYXRhLmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgICBjb25zdCBpdGVtT2JqID0geyB2YWx1ZTogaXRlbS5pZCwgdGl0bGU6IGl0ZW0uaXRlbSB9Ow0KICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcy5wdXNoKGl0ZW1PYmopOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0U3ViSXRlbXNTZWxlY3RlZChpdGVtKSB7DQogICAgICBjb25zb2xlLmxvZyhpdGVtLCAiZGtra2xzbGtsa3MiKTsNCiAgICAgIHRoaXMuc3ViTG9hZGVkID0gZmFsc2U7DQogICAgICB0aGlzLmN1cnJlbnRJdGVtID0gaXRlbTsNCiAgICAgIGNvbnN0IGl0ZW1JRCA9IGl0ZW07DQogICAgICB0aGlzLiRzdG9yZQ0KICAgICAgICAuZGlzcGF0Y2goImludmVudG9yeS9nZXRTdWJJdGVtQnlJRCIsIHsgaXRlbUlEIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICB0aGlzLnN1YkxvYWRlZCA9IHRydWU7DQogICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXMuZGF0YTsNCg0KICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEsICJyZXNvbnNlbGxsZSIpOw0KICAgICAgICAgIC8vIHRoaXMuc3ViSXRlbXMgPSBkYXRhOw0KICAgICAgICAgIHRoaXMuc3ViQ2F0ZWdvcmllcyA9IFtdOw0KICAgICAgICAgIGRhdGEuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgY29uc3QgaXRlbU9iaiA9IHsgdmFsdWU6IGl0ZW0uaWQsIHRpdGxlOiBpdGVtLm5hbWUgfTsNCiAgICAgICAgICAgIHRoaXMuc3ViQ2F0ZWdvcmllcy5wdXNoKGl0ZW1PYmopOw0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMudG90YWxSb3dzID0gZGF0YS5sZW5ndGg7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgb25MYW5ndWFnZUNoYW5nZShzZWxlY3Rpb24pIHsNCiAgICAgIGNvbnNvbGUubG9nKCJuZXcgbGFuZyIsIHNlbGVjdGlvbik7DQogICAgICBpZiAoc2VsZWN0aW9uID09PSAiUHJvZHVjdFNhbGVzIikgew0KICAgICAgICB0aGlzLnNob3dQcm9kdWN0U2FsZXNDb250ID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5zaG93U2luZ2xlU2VsZWN0aW9uQ29udCA9IGZhbHNlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zaG93U2luZ2xlU2VsZWN0aW9uQ29udCA9IHRydWU7DQogICAgICAgIHRoaXMuc2hvd1Byb2R1Y3RTYWxlc0NvbnQgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uQ2F0ZWdvcnlDaGFuZ2UoaXRlbSkgew0KICAgICAgY29uc29sZS5sb2coaXRlbSwgInNza2pkc2pzamRranNra2pzaiIpOw0KICAgICAgdGhpcy5nZXRTdWJJdGVtc1NlbGVjdGVkKGl0ZW0pOw0KICAgIH0sDQogICAgb25zdWJDYXRlZ29yeUNoYW5nZShpdGVtKSB7DQogICAgICBjb25zb2xlLmxvZyhpdGVtLCAiaXRlbW1tbW0iKTsNCiAgICB9LA0KDQogICAgLyoqDQogICAgICogV2hlbiB0aGUgbG9jYXRpb24gZm91bmQNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gYWRkcmVzc0RhdGEgRGF0YSBvZiB0aGUgZm91bmQgbG9jYXRpb24NCiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGxhY2VSZXN1bHREYXRhIFBsYWNlUmVzdWx0IG9iamVjdA0KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZCBJbnB1dCBjb250YWluZXIgSUQNCiAgICAgKi8NCiAgICBnZXRBZGRyZXNzRGF0YShhZGRyZXNzRGF0YSwgcGxhY2VSZXN1bHREYXRhLCBpZCkgew0KICAgICAgY29uc29sZS5sb2coImNoYW5nZWQiKTsNCiAgICAgIGNvbnN0IGFkZHJlc3NMYXQgPSB7DQogICAgICAgIGxhdDogYWRkcmVzc0RhdGEubGF0aXR1ZGUsDQogICAgICAgIGxvbmc6IGFkZHJlc3NEYXRhLmxvbmdpdHVkZSwNCiAgICAgICAgY291bnRyeTogYWRkcmVzc0RhdGEuY291bnRyeSwNCiAgICAgICAgcm91dGU6IGFkZHJlc3NEYXRhLnJvdXRlLA0KICAgICAgICBsb2NhbGl0eTogYWRkcmVzc0RhdGEubG9jYWxpdHksDQogICAgICB9Ow0KICAgICAgdGhpcy5pbnN0YWxsYXRpb25BZGRyZXNzID0gYWRkcmVzc0xhdDsNCiAgICAgIGNvbnNvbGUubG9nKGFkZHJlc3NEYXRhLCBwbGFjZVJlc3VsdERhdGEsIGlkKTsNCiAgICB9LA0KDQogICAgYWRkTG9jYXRpb24oKSB7DQogICAgICB0aGlzLmlzQWRkaW5nTG9jYXRpb24gPSB0cnVlOw0KICAgICAgdGhpcy5tZXNzYWdlID0gIiI7DQoNCiAgICAgIGlmICgNCiAgICAgICAgdGhpcy5zdGF0ZSA9PT0gIiIgfHwNCiAgICAgICAgdGhpcy5sZ2EgPT09ICIiIHx8DQogICAgICAgIHRoaXMuaW5zdGFsbGF0aW9uQWRkcmVzcyA9PT0gIiINCiAgICAgICkgew0KICAgICAgICB0aGlzLm1lc3NhZ2UgPSAiZmlsbCBhbGwgYWRkcmVzcyBmaWVsZHMiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY29uc3QgY3VycmVudExvY2F0aW9uID0gew0KICAgICAgICAgIGlkOiB0aGlzLmlkICsgMSwNCiAgICAgICAgICBsb2c6IHRoaXMuaW5zdGFsbGF0aW9uQWRkcmVzcy5sb25nLA0KICAgICAgICAgIGxhdDogdGhpcy5pbnN0YWxsYXRpb25BZGRyZXNzLmxhdCwNCiAgICAgICAgICBpbnN0YWxsYXRpb25BZGRyZXNzOiB0aGlzLmluc3RhbGxhdGlvbkFkZHJlc3MsDQogICAgICAgICAgc3RhdGVzX2lkOiB0aGlzLnN0YXRlLA0KICAgICAgICAgIGxnYXNfaWQ6IHRoaXMubGdhLA0KICAgICAgICAgIGFkZHJlc3M6IHRoaXMuZnVsbEFkZHJlc3MsDQogICAgICAgIH07DQogICAgICAgIHRoaXMuaWQgKz0gMTsNCiAgICAgICAgY29uc29sZS5sb2coY3VycmVudExvY2F0aW9uLCAiY3VycmVudExvY2F0aW9uIik7DQogICAgICAgIHRoaXMuaW5zdGFsbGF0aW9uTG9jYXRpb25zID0gdGhpcy5pbnN0YWxsYXRpb25Mb2NhdGlvbnMuY29uY2F0KA0KICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbg0KICAgICAgICApOw0KICAgICAgICB0aGlzLmluc3RhbGxhdGlvbkxvY2F0aW9uc09iamVjdCA9IHRoaXMuaW5zdGFsbGF0aW9uTG9jYXRpb25zOw0KICAgICAgICB0aGlzLmluc3RhbGxhdGlvbkFkZHJlc3MgPSAiIjsNCiAgICAgICAgdGhpcy5zdGF0ZSA9ICIiOw0KICAgICAgICB0aGlzLmxnYSA9ICIiOw0KICAgICAgfQ0KDQogICAgICB0aGlzLmlzQWRkaW5nTG9jYXRpb24gPSBmYWxzZTsNCiAgICAgIHRoaXMuc2hvd0xvY2F0aW9uSW5wdXRGaWVsZHMgPSBmYWxzZTsNCiAgICAgIHRoaXMuc2VsZWN0ZWQgPSAiZmFsc2UiOw0KICAgICAgdGhpcy5zaG93QWRkQW5vdGhlckxvY2F0aW9uQnRuID0gdHJ1ZTsNCiAgICB9LA0KDQogICAgc2hvd0FkZHJlc3NGaWVsZCgpIHsNCiAgICAgIHRoaXMuc2hvd0xvY2F0aW9uSW5wdXRGaWVsZHMgPSB0cnVlOw0KICAgICAgdGhpcy5zaG93QWRkQW5vdGhlckxvY2F0aW9uQnRuID0gZmFsc2U7DQogICAgICB0aGlzLnNlbGVjdGVkID0gInRydWUiOw0KICAgICAgdGhpcy5mdWxsQWRkcmVzcyA9ICIiOw0KICAgICAgdGhpcy5pc0FkZGluZ0xvY2F0aW9uID0gZmFsc2U7DQogICAgfSwNCg0KICAgIGFkZFByb2plY3QoKSB7DQogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7DQogICAgICBsZXQgY2xpZW50QWRkcmVzczsNCg0KICAgICAgY29uc29sZS5sb2codGhpcy5pbnN0YWxsYXRpb25Mb2NhdGlvbnNPYmplY3QsICJkc2pqcyIpOw0KICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaW5zdGFsbGF0aW9uTG9jYXRpb25zT2JqZWN0KS5sZW5ndGggIT09IDApIHsNCiAgICAgICAgY29uc29sZS5sb2coInllcyIpOw0KICAgICAgICBjbGllbnRBZGRyZXNzID0gdGhpcy5pbnN0YWxsYXRpb25Mb2NhdGlvbnNPYmplY3Q7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zb2xlLmxvZygibm8iKTsNCiAgICAgICAgY2xpZW50QWRkcmVzcyA9IFsNCiAgICAgICAgICB7DQogICAgICAgICAgICBsb2c6IHRoaXMuaW5zdGFsbGF0aW9uQWRkcmVzcy5sb25nLA0KICAgICAgICAgICAgbGF0OiB0aGlzLmluc3RhbGxhdGlvbkFkZHJlc3MubGF0LA0KICAgICAgICAgICAgc3RhdGVzX2lkOiB0aGlzLnN0YXRlLA0KICAgICAgICAgICAgbGdhc19pZDogdGhpcy5sZ2EsDQogICAgICAgICAgICBhZGRyZXNzOiB0aGlzLmZ1bGxBZGRyZXNzLA0KICAgICAgICAgIH0sDQogICAgICAgIF07DQogICAgICB9DQoNCiAgICAgIHRoaXMuJHJlZnMuYWRkUHJvamVjdFZhbGlkYXRpb24udmFsaWRhdGUoKS50aGVuKChzdWNjZXNzKSA9PiB7DQogICAgICAgIGlmIChzdWNjZXNzKSB7DQogICAgICAgICAgY29uc3QgZm9ybSA9IHsNCiAgICAgICAgICAgIGFkZHJlc3M6IEpTT04uc3RyaW5naWZ5KGNsaWVudEFkZHJlc3MpLA0KICAgICAgICAgICAgcHJvamVjdE5hbWU6IHRoaXMucHJvamVjdE5hbWUsDQogICAgICAgICAgICBwcm9qZWN0VHlwZTogdGhpcy5wcm9qZWN0VHlwZSwNCiAgICAgICAgICAgIHN5c3RlbVNpemU6IHRoaXMuc3lzdGVtU2l6ZSwNCiAgICAgICAgICAgIHNvbGFyUGFuZWxRdWFudGl0eTogdGhpcy5zb2xhclBhbmVsUXVhbnRpdHksDQogICAgICAgICAgICBiYXR0ZXJ5UXVhbnRpdHk6IHRoaXMuYmF0dGVyeVF1YW50aXR5LA0KICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sDQogICAgICAgICAgICBpbnN0YWxsYXRpb25UeXBlOiB0aGlzLmluc3RhbGxhdGlvblR5cGUsDQoNCiAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsDQogICAgICAgICAgICBjbGllbnQ6IHRoaXMuY2xpZW50LA0KICAgICAgICAgICAgbGdhOiB0aGlzLmxnYSwNCiAgICAgICAgICAgIHByb2R1Y3Q6IHRoaXMucHJvZHVjdCwNCiAgICAgICAgICAgIHByaWNlOiBwYXJzZUZsb2F0KHRoaXMucHJpY2UucmVwbGFjZSgvLC9nLCAiIikpLA0KICAgICAgICAgICAgaW52ZXJ0ZXJRdWFudGl0eTogdGhpcy5pbnZlcnRlclF1YW50aXR5LA0KICAgICAgICAgICAgc29sYXJQYW5lbFR5cGU6IHRoaXMuc29sYXJQYW5lbFR5cGUsDQogICAgICAgICAgICBpbnZlcnRlclR5cGU6IHRoaXMuaW52ZXJ0ZXJUeXBlLA0KICAgICAgICAgICAgYmF0dGVyeVR5cGU6IHRoaXMuYmF0dGVyeVR5cGUsDQogICAgICAgICAgICBkaXNjb3VudDogdGhpcy5wcm9kdWN0RGlzY291bnQsDQogICAgICAgICAgICBtaXNjZWxsYW5lb3VzOiBKU09OLnN0cmluZ2lmeSh0aGlzLmNyZWF0ZWRNaXNjZWxsYW5lb3VzKSwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIHRoaXMuJHN0b3JlDQogICAgICAgICAgICAuZGlzcGF0Y2goInByb2plY3QvYWRkUHJvamVjdCIsIHsgZm9ybSB9KQ0KICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3Byb2plY3RzIikudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy50b2FzdCgNCiAgICAgICAgICAgICAgICAgICJBZGQgUHJvamVjdCIsDQogICAgICAgICAgICAgICAgICAiQ2hlY2tDaXJjbGVJY29uIiwNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsDQogICAgICAgICAgICAgICAgICAic3VjY2VzcyINCiAgICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICAgICAgICB0aGlzLnRvYXN0KA0KICAgICAgICAgICAgICAgICJBZGQgUHJvamVjdCIsDQogICAgICAgICAgICAgICAgIlNsYXNoSWNvbiIsDQogICAgICAgICAgICAgICAgZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSwNCiAgICAgICAgICAgICAgICAiZGFuZ2VyIg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICB0aGlzLnRvYXN0KA0KICAgICAgICAgICAgIkFkZCBQcm9qZWN0IEF0dGVtcHQiLA0KICAgICAgICAgICAgIkFsZXJ0VHJpYW5nbGVJY29uIiwNCiAgICAgICAgICAgICJZb3UgbXVzdCBmaWxsIGluIGFsbCByZXF1aXJlZCBmaWVsZHMiLA0KICAgICAgICAgICAgIndhcm5pbmciDQogICAgICAgICAgKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRDbGllbnRzKCkgew0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImNsaWVudC9nZXRDbGllbnRzIikudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzLmRhdGE7DQogICAgICAgIGRhdGEuZm9yRWFjaCgoY2xpZW50KSA9PiB7DQogICAgICAgICAgY29uc3QgY2xpZW50b2JqID0geyB2YWx1ZTogY2xpZW50LmlkLCB0aXRsZTogY2xpZW50LmNsaWVudG5hbWUgfTsNCiAgICAgICAgICB0aGlzLmNsaWVudHMucHVzaChjbGllbnRvYmopOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0Q2xpZW50KCkgew0KICAgICAgY29uc3QgY2xpZW50SUQgPSB0aGlzLmNsaWVudDsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJjbGllbnQvZ2V0Q2xpZW50QnlJRCIsIHsgY2xpZW50SUQgfSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzLmRhdGE7DQogICAgICAgIHRoaXMuc3RhdGUgPSBkYXRhLnN0YXRlaWQ7DQogICAgICAgIGNvbnN0IHN0YXRlSUQgPSB0aGlzLnN0YXRlOw0KICAgICAgICB0aGlzLmxnYXMgPSBbeyB2YWx1ZTogbnVsbCwgdGl0bGU6ICJQbGVhc2Ugc2VsZWN0IGFuIGxnYSIgfV07DQogICAgICAgIHRoaXMuJHN0b3JlDQogICAgICAgICAgLmRpc3BhdGNoKCJjbGllbnQvZ2V0TEdBc0J5U3RhdGVJRCIsIHsgc3RhdGVJRCB9KQ0KICAgICAgICAgIC50aGVuKChpbm5lclJlcykgPT4gew0KICAgICAgICAgICAgY29uc3QgaW5uZXJEYXRhID0gaW5uZXJSZXMuZGF0YS5kYXRhOw0KICAgICAgICAgICAgaW5uZXJEYXRhLmZvckVhY2goKGxnYSkgPT4gew0KICAgICAgICAgICAgICBjb25zdCBsZ2FvYmogPSB7IHZhbHVlOiBsZ2EubGdhaWQsIHRpdGxlOiBsZ2EubGdhbmFtZSB9Ow0KICAgICAgICAgICAgICB0aGlzLmxnYXMucHVzaChsZ2FvYmopOw0KICAgICAgICAgICAgICB0aGlzLmxnYSA9IGRhdGEubGdhaWQ7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0UHJvamVjdFR5cGVzKCkgew0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInByb2plY3QvZ2V0UHJvamVjdFR5cGVzIikudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzLmRhdGE7DQogICAgICAgIGRhdGEuZm9yRWFjaCgodHlwZSkgPT4gew0KICAgICAgICAgIGNvbnN0IHR5cGVvYmogPSB7IHZhbHVlOiB0eXBlLCB0aXRsZTogdHlwZSB9Ow0KICAgICAgICAgIHRoaXMucHJvamVjdFR5cGVzLnB1c2godHlwZW9iaik7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRTdGF0dXNPcHRpb25zKCkgew0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInByb2plY3QvZ2V0UHJvamVjdFN0YXR1cyIpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHJlcy5kYXRhOw0KICAgICAgICBkYXRhLmZvckVhY2goKHN0YXR1cykgPT4gew0KICAgICAgICAgIGNvbnN0IHN0YXR1c29iaiA9IHsgdmFsdWU6IHN0YXR1cywgdGl0bGU6IHN0YXR1cyB9Ow0KICAgICAgICAgIHRoaXMuc3RhdHVzT3B0aW9ucy5wdXNoKHN0YXR1c29iaik7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRQcm9kdWN0cygpIHsNCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJwcm9kdWN0L2dldFByb2R1Y3RzIikudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzLmRhdGE7DQogICAgICAgIGNvbnNvbGUubG9nKGRhdGEsICJkc2pzampza2pzIik7DQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwcm9kdWN0cyIsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsNCiAgICAgICAgZGF0YS5mb3JFYWNoKChwcm9kdWN0KSA9PiB7DQogICAgICAgICAgY29uc3QgcHJvZHVjdG9iaiA9IHsNCiAgICAgICAgICAgIHZhbHVlOiBwcm9kdWN0LmlkLA0KICAgICAgICAgICAgdGl0bGU6IHByb2R1Y3QucHJvZHVjdG5hbWUsDQogICAgICAgICAgICBpZDogcHJvZHVjdC5pZCwNCiAgICAgICAgICB9Ow0KICAgICAgICAgIHRoaXMucHJvZHVjdHMucHVzaChwcm9kdWN0b2JqKTsNCiAgICAgICAgfSk7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMucHJvZHVjdHMsICJzZGprc2Rqa3MiKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0U3RhdGVzKCkgew0KICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImNsaWVudC9nZXRTdGF0ZXMiKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXMuZGF0YTsNCiAgICAgICAgZGF0YS5mb3JFYWNoKChzdGF0ZSkgPT4gew0KICAgICAgICAgIGNvbnN0IHN0YXRlb2JqID0geyB2YWx1ZTogc3RhdGUuc3RhdGVpZCwgdGl0bGU6IHN0YXRlLnNuYW1lIH07DQogICAgICAgICAgdGhpcy5zdGF0ZXMucHVzaChzdGF0ZW9iaik7DQogICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRMR0FzQnlTdGF0ZUlEKCkgew0KICAgICAgY29uc3Qgc3RhdGVJRCA9IHRoaXMuc3RhdGU7DQogICAgICB0aGlzLmxnYXMgPSBbeyB2YWx1ZTogbnVsbCwgdGl0bGU6ICJQbGVhc2Ugc2VsZWN0IGFuIGxnYSIgfV07DQogICAgICB0aGlzLiRzdG9yZQ0KICAgICAgICAuZGlzcGF0Y2goImNsaWVudC9nZXRMR0FzQnlTdGF0ZUlEIiwgeyBzdGF0ZUlEIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHJlcy5kYXRhOw0KICAgICAgICAgIGRhdGEuZm9yRWFjaCgobGdhKSA9PiB7DQogICAgICAgICAgICBjb25zdCBsZ2FvYmogPSB7IHZhbHVlOiBsZ2EubGdhaWQsIHRpdGxlOiBsZ2EubGdhbmFtZSB9Ow0KICAgICAgICAgICAgdGhpcy5sZ2FzLnB1c2gobGdhb2JqKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRCYXR0ZXJpZXNBbmRQYW5lbHMoKSB7DQogICAgICBjb25zdCBwcm9kdWN0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInByb2R1Y3RzIikpOw0KICAgICAgcHJvZHVjdHMuZXZlcnkoKHByb2R1Y3QpID0+IHsNCiAgICAgICAgaWYgKHByb2R1Y3QuaWQgPT09IHRoaXMucHJvZHVjdCkgew0KICAgICAgICAgIHRoaXMubnVtQmF0dGVyaWVzID0gcHJvZHVjdC5udW1iZXJvZmJhdHRlcmllczsNCiAgICAgICAgICB0aGlzLm51bVBhbmVscyA9IHByb2R1Y3QubnVtYmVyb2ZwYW5lbHM7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRQcm9kdWN0KCkgew0KICAgICAgY29uc3QgcHJvZHVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwcm9kdWN0cyIpKTsNCiAgICAgIGNvbnNvbGUubG9nKHByb2R1Y3RzLCAic2Rqa3Nqc2siKTsNCiAgICAgIHByb2R1Y3RzLmV2ZXJ5KChwcm9kdWN0KSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHByb2R1Y3QsIHByb2R1Y3RzLCAiZHNrc2Rza2oiKTsNCiAgICAgICAgaWYgKHByb2R1Y3QuaWQgPT09IHRoaXMucHJvZHVjdCkgew0KICAgICAgICAgIHRoaXMucHJpY2UgPSBwYXJzZUZsb2F0KHByb2R1Y3QucHJpY2UpLnRvU3RyaW5nKCk7DQogICAgICAgICAgdGhpcy5iYXR0ZXJ5VHlwZSA9IHByb2R1Y3QuYmF0dGVyaWVzX3R5cGU7DQogICAgICAgICAgdGhpcy5iYXR0ZXJ5UXVhbnRpdHkgPSBwYXJzZUZsb2F0KHByb2R1Y3QubnVtYmVyb2ZiYXR0ZXJpZXMpOw0KICAgICAgICAgIHRoaXMuaW52ZXJ0ZXJUeXBlID0gcHJvZHVjdC5pbnZlcnRlcl90eXBlOw0KICAgICAgICAgIHRoaXMuaW52ZXJ0ZXJRdWFudGl0eSA9IHBhcnNlRmxvYXQocHJvZHVjdC5udW1iZXJvZmludmVydGVycyk7DQogICAgICAgICAgdGhpcy5zb2xhclBhbmVsVHlwZSA9IHByb2R1Y3QucGFuZWxfdHlwZTsNCiAgICAgICAgICB0aGlzLnNvbGFyUGFuZWxRdWFudGl0eSA9IHBhcnNlRmxvYXQocHJvZHVjdC5udW1iZXJvZnBhbmVscyk7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBnZXRTdWJJdGVtcygpIHsNCiAgICAgIGNvbnN0IGl0ZW1JRHMgPSBbMSwgMiwgM107DQogICAgICBpdGVtSURzLmZvckVhY2goKGl0ZW1JRCkgPT4gew0KICAgICAgICB0aGlzLiRzdG9yZQ0KICAgICAgICAgIC5kaXNwYXRjaCgiaW52ZW50b3J5L2dldFN1Ykl0ZW1CeUlEIiwgeyBpdGVtSUQgfSkNCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgc3dpdGNoIChpdGVtSUQpIHsNCiAgICAgICAgICAgICAgY2FzZSAxOiAvLyBiYXR0ZXJ5DQogICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKChzdWJJdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgICBjb25zdCBiYXR0ZXJ5VHlwZSA9IHsNCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN1Ykl0ZW0uaWQsDQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzdWJJdGVtLm5hbWUsDQogICAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgICAgdGhpcy5iYXR0ZXJ5VHlwZXMucHVzaChiYXR0ZXJ5VHlwZSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgIGNhc2UgMjogLy8gc29sYXIgcGFuZWwNCiAgICAgICAgICAgICAgICBkYXRhLmZvckVhY2goKHN1Ykl0ZW0pID0+IHsNCiAgICAgICAgICAgICAgICAgIGNvbnN0IHNvbGFyUGFuZWxUeXBlID0gew0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3ViSXRlbS5pZCwNCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHN1Ykl0ZW0ubmFtZSwNCiAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICB0aGlzLnNvbGFyUGFuZWxUeXBlcy5wdXNoKHNvbGFyUGFuZWxUeXBlKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAvLyBpbnZlcnRlcg0KICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaCgoc3ViSXRlbSkgPT4gew0KICAgICAgICAgICAgICAgICAgY29uc3QgaW52ZXJ0ZXJUeXBlID0gew0KICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3ViSXRlbS5pZCwNCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHN1Ykl0ZW0ubmFtZSwNCiAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICB0aGlzLmludmVydGVyVHlwZXMucHVzaChpbnZlcnRlclR5cGUpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["InvoicingAndPayments.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InvoicingAndPayments.vue","sourceRoot":"src/views/projects","sourcesContent":["<template>\r\n  <div>\r\n    <b-row>\r\n      <b-col lg=\"12\">\r\n        <b-card no-body>\r\n          Invoicing page\r\n        </b-card>\r\n      </b-col>\r\n    </b-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ValidationProvider, ValidationObserver } from \"vee-validate\";\r\nimport { required } from \"@validations\";\r\nimport vSelect from \"vue-select\";\r\nimport VueGoogleAutocomplete from \"vue-google-autocomplete\";\r\nimport VueNumericInput from \"vue-numeric-input\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  components: {\r\n    ValidationProvider,\r\n    ValidationObserver,\r\n    vSelect,\r\n    VueGoogleAutocomplete,\r\n    VueNumericInput,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      misceMessage: null,\r\n      showAddAnotherLocationBtn: false,\r\n      showLocationInputFields: true,\r\n      id: 0,\r\n      installationLocationsObject: new Map(),\r\n      installationAddress: \"\",\r\n      installationLocations: [],\r\n      message: \"\",\r\n      selected: \"false\",\r\n      locationCountAboveOne: false,\r\n      isAddingLocation: false,\r\n      isLoading: false,\r\n      client: null,\r\n      product: null,\r\n      projectName: null,\r\n      fullAddress: null,\r\n      projectType: null,\r\n      systemModel: null,\r\n      systemSize: 0,\r\n      installationType: null,\r\n      selectionMode: null,\r\n      category: null,\r\n      subCategory: null,\r\n      price: null,\r\n      numBatteries: 1,\r\n      numPanels: 1,\r\n      status: null,\r\n      location: null,\r\n      state: null,\r\n      lga: null,\r\n      productDiscount: null,\r\n      description: null,\r\n      showSingleSelectionCont: false,\r\n      showProductSalesCont: false,\r\n      accessoryType: [],\r\n      accessory: null,\r\n      categories: [],\r\n      subCategories: [],\r\n      allMiscellaneous: [],\r\n      createdMiscellaneous: [],\r\n      miscellaneous: null,\r\n      miscellanousAmount: null,\r\n      clients: [{ value: null, title: \"select a client\" }],\r\n      products: [{ value: null, title: \"select a product\", id: null }],\r\n      projectTypes: [{ value: null, title: \"select a project type\" }],\r\n      systemModels: [\r\n        { value: null, text: \"Please select a solar system model\" },\r\n        { value: 1, text: \"BES-1\" },\r\n        { value: 2, text: \"BES-3\" },\r\n        { value: 3, text: \"BES-5\" },\r\n        { value: 4, text: \"BES-8\" },\r\n      ],\r\n      systemSizes: [\r\n        { value: null, text: \"Please select a solar system size\" },\r\n        { value: \"1 - 2 kW\", text: \"1 - 2 kW\" },\r\n        { value: \"3.0 kW\", text: \"3.0 kW\" },\r\n        { value: \"4.0 kW\", text: \"4.0 kW\" },\r\n        { value: \"5.0 kW\", text: \"5.0 kW\" },\r\n        { value: \"5 - 10 kW\", text: \"5 - 10 kW\" },\r\n        { value: \"10 + kW\", text: \"10 + kW\" },\r\n      ],\r\n      selectionModes: [\r\n        { value: null, title: \"select product mode\" },\r\n        { value: \"ProductSales\", title: \"Product Sales\" },\r\n        { value: \"SingleStockSales\", title: \"Single Stock Sales\" },\r\n      ],\r\n      installationTypes: [\r\n        { value: null, title: \"select an installation type\" },\r\n        { value: \"Rooftop\", title: \"Rooftop\" },\r\n        { value: \"Groundmount\", title: \"Groundmount\" },\r\n      ],\r\n      statusOptions: [{ value: null, title: \"select a project status\" }],\r\n      locations: [{ value: null, text: \"Please select a location\" }],\r\n      states: [{ value: null, title: \"Please select a state\" }],\r\n      address: [{ value: null, text: \"Please select an address\" }],\r\n      lgas: [{ value: null, title: \"Please select an lga\" }],\r\n      batteryType: null,\r\n      batteryQuantity: 1,\r\n      batteryTypes: [{ value: null, title: \"Please select a battery type\" }],\r\n      inverterType: null,\r\n      inverterQuantity: 1,\r\n      inverterTypes: [{ value: null, title: \"Please select an inverter type\" }],\r\n      solarPanelType: null,\r\n      solarPanelQuantity: 1,\r\n      solarPanelTypes: [\r\n        { value: null, title: \"Please select a solar panel type\" },\r\n      ],\r\n      miscellaneousField: [\r\n        { key: \"miscellaneous_id\", label: \"Name\" },\r\n        { key: \"amount\", label: \"amount\" },\r\n        { key: \"title\", label: \"title\" },\r\n      ],\r\n\r\n      required,\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    price(newValue) {\r\n      const result = newValue\r\n        .replace(/\\D/g, \"\")\r\n        .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n      // eslint-disable-next-line no-return-assign\r\n      this.$nextTick(() => (this.price = result));\r\n    },\r\n  },\r\n  mounted() {\r\n    document.getElementById(\"custom-breadcrumb\").innerHTML =\r\n      'Projects / <span style=\"color: #C4C4C4\">Add Project</span>';\r\n    this.$refs.address.focus();\r\n    this.getSubItemsMis(6);\r\n    this.getMiscellaneous();\r\n  },\r\n  beforeDestroy() {\r\n    localStorage.removeItem(\"products\");\r\n  },\r\n  created() {\r\n    this.getClients();\r\n    this.getProjectTypes();\r\n    this.getStatusOptions();\r\n    this.getProducts();\r\n    this.getSubItems();\r\n    this.getStates();\r\n    this.getItems();\r\n    this.getSubItemsMis(6);\r\n    this.getMiscellaneous();\r\n  },\r\n  methods: {\r\n    deleteMiscellaneous(index) {\r\n      this.createdMiscellaneous.splice(index, 1);\r\n    },\r\n    addMiscellaneous() {\r\n      console.log(this.allMiscellaneous, \"djdsjsjks\");\r\n\r\n      this.misceMessage = \"\";\r\n      if (!this.miscellaneous || !this.miscellanousAmount) {\r\n        this.misceMessage = \"Select Options\";\r\n        return;\r\n      }\r\n      const miscellan = this.allMiscellaneous.filter(\r\n        (e) => e.value == this.miscellaneous\r\n      );\r\n      this.createdMiscellaneous.push({\r\n        miscellaneous_id: this.miscellaneous,\r\n        amount: this.miscellanousAmount,\r\n        title: miscellan[0].text,\r\n      });\r\n    },\r\n    miscellaneousSelectChange(e, ki) {\r\n      console.log(e, ki, \"sjsdjkdjs\");\r\n    },\r\n    getMiscellaneous() {\r\n      const token = localStorage.getItem(\"token\");\r\n      axios.defaults.headers.Authorization = `Bearer ${token}`;\r\n\r\n      const formData = new FormData();\r\n      formData.append(\"title\", this.miscellaneous);\r\n\r\n      axios\r\n        .get(`${process.env.VUE_APP_BASE_URL}/mis`)\r\n        .then((response) => {\r\n          const { data } = response.data;\r\n          const output = [];\r\n          data.map((subItem) => {\r\n            const allMiscellaneous = { value: subItem.id, text: subItem.title };\r\n            output.push(allMiscellaneous);\r\n          });\r\n          this.allMiscellaneous = output;\r\n        })\r\n        .catch((err) => {\r\n          alert(err.response.data?.message);\r\n          this.message = err.response.data?.message;\r\n          console.log(err);\r\n        });\r\n    },\r\n    removeLocation(id) {\r\n      this.installationLocationsObject = this.installationLocationsObject.filter(\r\n        (location) => location.id !== id\r\n      );\r\n    },\r\n    getSubItemsMis(item) {\r\n      const itemID = item;\r\n      this.$store\r\n        .dispatch(\"inventory/getSubItemByID\", { itemID })\r\n        .then((res) => {\r\n          console.log(res, \"jsjksk\");\r\n          const { data } = res.data;\r\n\r\n          if (item === 2) {\r\n            data.forEach((subItem) => {\r\n              const systemSize = { value: subItem.id, text: subItem.name };\r\n              this.systemSizes.push(systemSize);\r\n            });\r\n          } else if (item === 1) {\r\n            data.forEach((subItem) => {\r\n              const inverterType = { value: subItem.id, text: subItem.name };\r\n              this.inverterTypes.push(inverterType);\r\n            });\r\n          } else if (item === 6) {\r\n            data.forEach((subItem) => {\r\n              const accessoryType = { value: subItem.id, text: subItem.name };\r\n              this.accessoryType.push(accessoryType);\r\n            });\r\n          } else {\r\n            data.forEach((subItem) => {\r\n              const batteryType = { value: subItem.id, text: subItem.name };\r\n              this.batteryTypes.push(batteryType);\r\n            });\r\n          }\r\n        });\r\n    },\r\n    getItems() {\r\n      this.$store.dispatch(\"inventory/getItems\").then((res) => {\r\n        this.loaded = true;\r\n        const { data } = res.data;\r\n        console.log(data, \"sksjkskkjsd\");\r\n        // this.categories = data\r\n        data.forEach((item) => {\r\n          const itemObj = { value: item.id, title: item.item };\r\n          this.categories.push(itemObj);\r\n        });\r\n      });\r\n    },\r\n    getSubItemsSelected(item) {\r\n      console.log(item, \"dkkklslklks\");\r\n      this.subLoaded = false;\r\n      this.currentItem = item;\r\n      const itemID = item;\r\n      this.$store\r\n        .dispatch(\"inventory/getSubItemByID\", { itemID })\r\n        .then((res) => {\r\n          this.subLoaded = true;\r\n          const { data } = res.data;\r\n\r\n          console.log(data, \"resonsellle\");\r\n          // this.subItems = data;\r\n          this.subCategories = [];\r\n          data.forEach((item) => {\r\n            const itemObj = { value: item.id, title: item.name };\r\n            this.subCategories.push(itemObj);\r\n          });\r\n          this.totalRows = data.length;\r\n        });\r\n    },\r\n    onLanguageChange(selection) {\r\n      console.log(\"new lang\", selection);\r\n      if (selection === \"ProductSales\") {\r\n        this.showProductSalesCont = true;\r\n        this.showSingleSelectionCont = false;\r\n      } else {\r\n        this.showSingleSelectionCont = true;\r\n        this.showProductSalesCont = false;\r\n      }\r\n    },\r\n    onCategoryChange(item) {\r\n      console.log(item, \"sskjdsjsjdkjskkjsj\");\r\n      this.getSubItemsSelected(item);\r\n    },\r\n    onsubCategoryChange(item) {\r\n      console.log(item, \"itemmmmm\");\r\n    },\r\n\r\n    /**\r\n     * When the location found\r\n     * @param {Object} addressData Data of the found location\r\n     * @param {Object} placeResultData PlaceResult object\r\n     * @param {String} id Input container ID\r\n     */\r\n    getAddressData(addressData, placeResultData, id) {\r\n      console.log(\"changed\");\r\n      const addressLat = {\r\n        lat: addressData.latitude,\r\n        long: addressData.longitude,\r\n        country: addressData.country,\r\n        route: addressData.route,\r\n        locality: addressData.locality,\r\n      };\r\n      this.installationAddress = addressLat;\r\n      console.log(addressData, placeResultData, id);\r\n    },\r\n\r\n    addLocation() {\r\n      this.isAddingLocation = true;\r\n      this.message = \"\";\r\n\r\n      if (\r\n        this.state === \"\" ||\r\n        this.lga === \"\" ||\r\n        this.installationAddress === \"\"\r\n      ) {\r\n        this.message = \"fill all address fields\";\r\n      } else {\r\n        const currentLocation = {\r\n          id: this.id + 1,\r\n          log: this.installationAddress.long,\r\n          lat: this.installationAddress.lat,\r\n          installationAddress: this.installationAddress,\r\n          states_id: this.state,\r\n          lgas_id: this.lga,\r\n          address: this.fullAddress,\r\n        };\r\n        this.id += 1;\r\n        console.log(currentLocation, \"currentLocation\");\r\n        this.installationLocations = this.installationLocations.concat(\r\n          currentLocation\r\n        );\r\n        this.installationLocationsObject = this.installationLocations;\r\n        this.installationAddress = \"\";\r\n        this.state = \"\";\r\n        this.lga = \"\";\r\n      }\r\n\r\n      this.isAddingLocation = false;\r\n      this.showLocationInputFields = false;\r\n      this.selected = \"false\";\r\n      this.showAddAnotherLocationBtn = true;\r\n    },\r\n\r\n    showAddressField() {\r\n      this.showLocationInputFields = true;\r\n      this.showAddAnotherLocationBtn = false;\r\n      this.selected = \"true\";\r\n      this.fullAddress = \"\";\r\n      this.isAddingLocation = false;\r\n    },\r\n\r\n    addProject() {\r\n      this.isLoading = true;\r\n      let clientAddress;\r\n\r\n      console.log(this.installationLocationsObject, \"dsjjs\");\r\n      if (Object.keys(this.installationLocationsObject).length !== 0) {\r\n        console.log(\"yes\");\r\n        clientAddress = this.installationLocationsObject;\r\n      } else {\r\n        console.log(\"no\");\r\n        clientAddress = [\r\n          {\r\n            log: this.installationAddress.long,\r\n            lat: this.installationAddress.lat,\r\n            states_id: this.state,\r\n            lgas_id: this.lga,\r\n            address: this.fullAddress,\r\n          },\r\n        ];\r\n      }\r\n\r\n      this.$refs.addProjectValidation.validate().then((success) => {\r\n        if (success) {\r\n          const form = {\r\n            address: JSON.stringify(clientAddress),\r\n            projectName: this.projectName,\r\n            projectType: this.projectType,\r\n            systemSize: this.systemSize,\r\n            solarPanelQuantity: this.solarPanelQuantity,\r\n            batteryQuantity: this.batteryQuantity,\r\n            description: this.description,\r\n            installationType: this.installationType,\r\n\r\n            status: this.status,\r\n            client: this.client,\r\n            lga: this.lga,\r\n            product: this.product,\r\n            price: parseFloat(this.price.replace(/,/g, \"\")),\r\n            inverterQuantity: this.inverterQuantity,\r\n            solarPanelType: this.solarPanelType,\r\n            inverterType: this.inverterType,\r\n            batteryType: this.batteryType,\r\n            discount: this.productDiscount,\r\n            miscellaneous: JSON.stringify(this.createdMiscellaneous),\r\n          };\r\n          this.$store\r\n            .dispatch(\"project/addProject\", { form })\r\n            .then((res) => {\r\n              this.isLoading = false;\r\n              const { message } = res.data;\r\n              this.$router.push(\"/projects\").then(() => {\r\n                this.toast(\r\n                  \"Add Project\",\r\n                  \"CheckCircleIcon\",\r\n                  message,\r\n                  \"success\"\r\n                );\r\n              });\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n              this.isLoading = false;\r\n              this.toast(\r\n                \"Add Project\",\r\n                \"SlashIcon\",\r\n                err.response.data.message,\r\n                \"danger\"\r\n              );\r\n            });\r\n        } else {\r\n          this.isLoading = false;\r\n          this.toast(\r\n            \"Add Project Attempt\",\r\n            \"AlertTriangleIcon\",\r\n            \"You must fill in all required fields\",\r\n            \"warning\"\r\n          );\r\n        }\r\n      });\r\n    },\r\n    getClients() {\r\n      this.$store.dispatch(\"client/getClients\").then((res) => {\r\n        const { data } = res.data;\r\n        data.forEach((client) => {\r\n          const clientobj = { value: client.id, title: client.clientname };\r\n          this.clients.push(clientobj);\r\n        });\r\n      });\r\n    },\r\n    getClient() {\r\n      const clientID = this.client;\r\n      this.$store.dispatch(\"client/getClientByID\", { clientID }).then((res) => {\r\n        const { data } = res.data;\r\n        this.state = data.stateid;\r\n        const stateID = this.state;\r\n        this.lgas = [{ value: null, title: \"Please select an lga\" }];\r\n        this.$store\r\n          .dispatch(\"client/getLGAsByStateID\", { stateID })\r\n          .then((innerRes) => {\r\n            const innerData = innerRes.data.data;\r\n            innerData.forEach((lga) => {\r\n              const lgaobj = { value: lga.lgaid, title: lga.lganame };\r\n              this.lgas.push(lgaobj);\r\n              this.lga = data.lgaid;\r\n            });\r\n          });\r\n      });\r\n    },\r\n    getProjectTypes() {\r\n      this.$store.dispatch(\"project/getProjectTypes\").then((res) => {\r\n        const { data } = res.data;\r\n        data.forEach((type) => {\r\n          const typeobj = { value: type, title: type };\r\n          this.projectTypes.push(typeobj);\r\n        });\r\n      });\r\n    },\r\n    getStatusOptions() {\r\n      this.$store.dispatch(\"project/getProjectStatus\").then((res) => {\r\n        const { data } = res.data;\r\n        data.forEach((status) => {\r\n          const statusobj = { value: status, title: status };\r\n          this.statusOptions.push(statusobj);\r\n        });\r\n      });\r\n    },\r\n    getProducts() {\r\n      this.$store.dispatch(\"product/getProducts\").then((res) => {\r\n        const { data } = res.data;\r\n        console.log(data, \"dsjsjjskjs\");\r\n        localStorage.setItem(\"products\", JSON.stringify(data));\r\n        data.forEach((product) => {\r\n          const productobj = {\r\n            value: product.id,\r\n            title: product.productname,\r\n            id: product.id,\r\n          };\r\n          this.products.push(productobj);\r\n        });\r\n        console.log(this.products, \"sdjksdjks\");\r\n      });\r\n    },\r\n    getStates() {\r\n      this.$store.dispatch(\"client/getStates\").then((res) => {\r\n        const { data } = res.data;\r\n        data.forEach((state) => {\r\n          const stateobj = { value: state.stateid, title: state.sname };\r\n          this.states.push(stateobj);\r\n        });\r\n      });\r\n    },\r\n    getLGAsByStateID() {\r\n      const stateID = this.state;\r\n      this.lgas = [{ value: null, title: \"Please select an lga\" }];\r\n      this.$store\r\n        .dispatch(\"client/getLGAsByStateID\", { stateID })\r\n        .then((res) => {\r\n          const { data } = res.data;\r\n          data.forEach((lga) => {\r\n            const lgaobj = { value: lga.lgaid, title: lga.lganame };\r\n            this.lgas.push(lgaobj);\r\n          });\r\n        });\r\n    },\r\n    getBatteriesAndPanels() {\r\n      const products = JSON.parse(localStorage.getItem(\"products\"));\r\n      products.every((product) => {\r\n        if (product.id === this.product) {\r\n          this.numBatteries = product.numberofbatteries;\r\n          this.numPanels = product.numberofpanels;\r\n          return false;\r\n        }\r\n        return true;\r\n      });\r\n    },\r\n    getProduct() {\r\n      const products = JSON.parse(localStorage.getItem(\"products\"));\r\n      console.log(products, \"sdjksjsk\");\r\n      products.every((product) => {\r\n        console.log(product, products, \"dsksdskj\");\r\n        if (product.id === this.product) {\r\n          this.price = parseFloat(product.price).toString();\r\n          this.batteryType = product.batteries_type;\r\n          this.batteryQuantity = parseFloat(product.numberofbatteries);\r\n          this.inverterType = product.inverter_type;\r\n          this.inverterQuantity = parseFloat(product.numberofinverters);\r\n          this.solarPanelType = product.panel_type;\r\n          this.solarPanelQuantity = parseFloat(product.numberofpanels);\r\n          return false;\r\n        }\r\n        return true;\r\n      });\r\n    },\r\n    getSubItems() {\r\n      const itemIDs = [1, 2, 3];\r\n      itemIDs.forEach((itemID) => {\r\n        this.$store\r\n          .dispatch(\"inventory/getSubItemByID\", { itemID })\r\n          .then((res) => {\r\n            const { data } = res.data;\r\n            switch (itemID) {\r\n              case 1: // battery\r\n                data.forEach((subItem) => {\r\n                  const batteryType = {\r\n                    value: subItem.id,\r\n                    title: subItem.name,\r\n                  };\r\n                  this.batteryTypes.push(batteryType);\r\n                });\r\n                break;\r\n              case 2: // solar panel\r\n                data.forEach((subItem) => {\r\n                  const solarPanelType = {\r\n                    value: subItem.id,\r\n                    title: subItem.name,\r\n                  };\r\n                  this.solarPanelTypes.push(solarPanelType);\r\n                });\r\n                break;\r\n              default:\r\n                // inverter\r\n                data.forEach((subItem) => {\r\n                  const inverterType = {\r\n                    value: subItem.id,\r\n                    title: subItem.name,\r\n                  };\r\n                  this.inverterTypes.push(inverterType);\r\n                });\r\n            }\r\n          });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n[dir] .form-control:focus {\r\n  border-color: #4D6D8A;\r\n}\r\n[dir] .custom-select:focus {\r\n  border-color: #4D6D8A;\r\n}\r\n[dir] .b-form-spinbutton.form-control:focus,\r\n[dir] .b-form-spinbutton.form-control.focus {\r\n  border-color: #4D6D8A;\r\n}\r\n[dir] .input-group:not(.bootstrap-touchspin):focus-within .form-control,\r\n[dir] .input-group:not(.bootstrap-touchspin):focus-within .input-group-text {\r\n  border-color: #4D6D8A;\r\n}\r\n.number-input {\r\n  height: 38px;\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\">\r\n.flex {\r\n  display: flex;\r\n  column-gap: 1rem;\r\n}\r\n@import \"@core/scss/vue/libs/vue-select.scss\";\r\n</style>\r\n"]}]}